<% days = ["日", "月", "火", "水", "木", "金", "土"] %>
<div data-scope-path="shared/header">
  <h1>ランキング</h1>
  <%= render "shared/header" %>
</div>
<div style="display:flex;">
  <div data-scope-path="shared/side_bar">
    <%= render "shared/sidebar" %>
  </div>
<div class="main">
  <div data-scope-path="results/ranking">
    <%# 各商材の%を選択 %>
    <h2>
      <%= link_to "<<",ranking_results_path(month:@month.prev_month), class:"link" %>
      <%= @month.month %>月 (<%= @minimum_date_cash.strftime("%m月%d日") %>〜<%= @maximum_date_cash.strftime("%m月%d日") %>)
      <%= link_to ">>",ranking_results_path(month:@month.next_month), class:"link" %>
    </h2>
    <%= render "result_parts/valuation_factory" %>
    <h2>商材別獲得数</h2>
    <div style="display: flex;">
      <div><%# dメル %>
        <p class="sub-title">dメル</p>
        <table>
          <thead>
            <tr>
              <th>順位</th>
              <th>氏名</th>
              <th>現状獲得数</th>
            </tr>
          </thead>
          <tbody>
          <% @dmers_rank.each_with_index do |dmer,i| %>
            <tr>
              <td><%= i + 1 %>位</td>
              <td><%= dmer[0] %></td>
              <td><%= (dmer[1]) %></td>
            </tr>
          <% break if i == 4 %>
          <% end %>
          </tbody>
        </table>
      </div><%# /dメル %>
      <div><%# auPay %>
        <p class="sub-title">auPay</p>
        <table>
          <thead>
            <tr>
              <th>順位</th>
              <th>氏名</th>
              <th>現状獲得数</th>
            </tr>
          </thead>
          <tbody>
          <% @aupays_rank.each_with_index do |aupay,i| %>
            <tr>
              <td><%= i + 1 %>位</td>
              <td><%= aupay[0] %></td>
              <td><%= (aupay[1]) %></td>
            </tr>
          <% break if i == 4 %>
          <% end %>
          </tbody>
        </table>
      </div><%# /auPay %>
    </div>
    <div style="display: flex;">
      <div><%# 楽天ペイ %>
        <p class="sub-title">楽天ペイ</p>
        <table>
          <thead>
            <tr>
              <th>順位</th>
              <th>氏名</th>
              <th>現状獲得数</th>
            </tr>
          </thead>
          <tbody>
          <% @rakuten_pays_rank.each_with_index do |rakuten_pay,i| %>
            <tr>
              <td><%= i + 1 %>位</td>
              <td><%= rakuten_pay[0] %></td>
              <td><%= (rakuten_pay[1]) %></td>
            </tr>
          <% break if i == 4 %>
          <% end %>
          </tbody>
        </table>
      </div><%# /楽天ペイ %>
      <div><%# AirPay %>
        <p class="sub-title">AirPay</p>
        <table>
          <thead>
            <tr>
              <th>順位</th>
              <th>氏名</th>
              <th>現状獲得数</th>
            </tr>
          </thead>
          <tbody>
          <% @airpays_rank.each_with_index do |airpay,i| %>
            <tr>
              <td><%= i + 1 %>位</td>
              <td><%= airpay[0] %></td>
              <td><%= (airpay[1]) %></td>
            </tr>
          <% break if i == 4 %>
          <% end %>
          </tbody>
        </table>
      </div><%# /AirPay %>
    </div>
    <p class="caution-text">
      ※獲得数は不備・NGも入ってます。
      （<%= @minimum_date_cash.strftime("%m月%d日") %>〜<%= @maximum_date_cash.strftime("%m月%d日") %>）
      の範囲で算出しております。
    </p>
  </div>
</div>